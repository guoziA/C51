C51 COMPILER V9.52.0.0   ________                                                          04/06/2015 18:13:44 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE ________
OBJECT MODULE PLACED IN .\ºìÍâÒ£¿Ø.obj
COMPILER INVOKED BY: E:\keil\C51\BIN\C51.EXE E:\My Documents\other\ÖÇ¿Ø\ºìÍâÒ£¿Ø.c BROWSE DEBUG OBJECTEXTEND PRINT(.\ºìÍ
                    -âÒ£¿Ø.lst) OBJECT(.\ºìÍâÒ£¿Ø.obj)

line level    source

   1          //ÒÔÏÂÎÄ¼şÊÇ51µ¥Æ¬»úÊµÏÖÒ£¿Ø½âÂë£¬Í¨¹ıÊıÂë¹ÜÏÔÊ¾¼üÂëµÄ³ÌĞò£¬P0¿ÚÇı¶¯ÊıÂë¹Ü¶ÎÑ¡£¬p2.6ºÍp2.7ÎªÊıÂë¹ÜÎ»Ñ¡£
   2          //¬½ÓÊÕÍ·Á¬µ½P3.2¿Ú¡£´Ë³ÌĞòÒÔÍ¨¹ıÑéÖ¤£¬¿ÉÒÔÖ±½Ó±àÒëÊ¹ÓÃ£¬ÁíÍâ»¹ÓĞÒ»¸ö¼ÌµçÆ÷ºÍ·äÃùÆ÷µÄ¿ØÖÆ£¬²»ÓÃ¿ÉÒÔÆÁ±Îµô¡
   3          //£;********************************************************************************;*  ÃèÊö:             
             -                                                          *;*           Ò£¿Ø¼üÖµ¶ÁÈ¡Æ÷                                  
             -              *;*         ÊıÂë¹ÜÏÔÊ¾, P0¿ÚÎªÊıÂë¹ÜµÄÊı¾İ¿Ú                                     *;*                      
             -                                                        *;**************************************************************
             -******************;Ò£¿Ø¼üÖµ½âÂë-ÊıÂë¹ÜÏÔÊ¾                *;************************************************************
             -********************/
   4          #include <regx52.h>
   5          #include <intrins.h>
   6          void IR_SHOW();
   7          void delay(unsigned char x);//ÑÓÊ±x*0.14MS
   8          void delay1(unsigned char ms);//ÑÓÊ±xms
   9          void beep();//·äÃùÆ÷
  10          sfr  P4  = 0xE8;
  11          sbit IRIN = P4^6;//ºìÍâ½ÓÊÕ
  12          sbit BEEP = P4^4;//·äÃùÆ÷Õë½Å
  13          sbit RELAY= P1^3;//¼ÌµçÆ÷
  14          sbit GEWEI= P2^7;//ÊıÂë¹Ü¸öÎ»
  15          sbit SHIWEI= P2^6;//ÊıÂë¹ÜÊ®Î»
  16          unsigned char IRCOM[8];//´æ·ÅÊÕµ½µÄºìÍâÊı¾İ
  17          unsigned char code table[16] =                   
  18          {0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0x88,0x83,0xc6,0xa1,0x86,0x8e};//ÊıÂë¹ÜÏÔÊ¾
  19          main(){
  20   1              IE = 0x81;    //ÔÊĞí×ÜÖĞ¶ÏÖĞ¶Ï,Ê¹ÄÜ INT0 Íâ²¿ÖĞ¶Ï
  21   1              TCON = 0x1;   //´¥·¢·½Ê½ÎªÂö³å¸º±ßÑØ´¥·¢ 
  22   1              delay(1);//ÑÓÊ±
  23   1              IRIN=1; //À­¸ßºìÍâ½ÓÊÕµãµçÎ»
  24   1              BEEP=1; //·äÃùÆ÷¾²Ä¬
  25   1              RELAY=1;   //¶Ï¼ÌµçÆ÷
  26   1              for(;;) //¿ªÊıÂë¹ÜÏÔÊ¾
  27   1              {    IR_SHOW();   }
  28   1      } //end main
  29          
  30          void IR_IN() interrupt 0 using 0{//Íâ²¿ÖĞ¶Ïint0
  31   1              unsigned char i,j,k,N=0; 
  32   1              EA = 0;//²»ÔÊĞíÖĞ¶Ï
  33   1              I1:  for (i=0;i<4;i++)   { 
  34   2                              if (IRIN==0) break; //Ã»ÓĞºìÍâĞÅºÅ³öÏÖ£¬ÍË³öÑ­»·
  35   2                              if (i==3) {//ÓĞĞÅºÅ³öÏÖ
  36   3                              EA =1;//×ÜÔÊĞíÖĞ¶Ï´ò¿ª
  37   3                              return;} 
  38   2                      }  
  39   1                      delay(20);  //ÑÓÊ±20*14m
  40   1                      if (IRIN==1) goto I1;  //·µ»Øl1ĞĞ£¬È·ÈÏIRĞÅºÅ³öÏÖ  
  41   1                      while (!IRIN) {           //µÈ IR ±äÎª¸ßµçÆ½    
  42   2                              delay(1);} 
  43   1                      for (j=0;j<4;j++) { //¹²4*8 = 32Î»2½øÖÆÂë
  44   2                              for (k=0;k<8;k++)  { 
  45   3                                      while (IRIN)            //µÈ IR ±äÎªµÍµçÆ½ 
  46   3                                      {delay(1);}  
  47   3                                      while (!IRIN)          //µÈ IR ±äÎª¸ßµçÆ½  
  48   3                                      {delay(1);}   
  49   3                                      while (IRIN)           //¼ÆËãIR¸ßµçÆ½Ê±³¤   
C51 COMPILER V9.52.0.0   ________                                                          04/06/2015 18:13:44 PAGE 2   

  50   3                                      {    
  51   4                                              delay(1);   
  52   4                                              N++;               
  53   4                                              if (N>=30) {EA=1;return;}  
  54   4                                      }   
  55   3                                      IRCOM[j]=IRCOM[j] >> 1;  
  56   3                                      if (N>=8) {IRCOM[j] = IRCOM[j] | 0x80;}  //¸ßµçÆ½Ê±¼ä´óÓÚ1.12ms£¬1.·ñÔòÎª0
  57   3                                      N=0;  }//end 
  58   2      //for k }//end 
  59   2      //for j   
  60   2                      }
  61   1                      if (IRCOM[2]!=~IRCOM[3]) {EA=1;return;}  
  62   1                      IRCOM[5]=IRCOM[2] & 0x0F;  
  63   1                      IRCOM[6]=IRCOM[2] & 0xF0; 
  64   1                      IRCOM[6]=IRCOM[6] >> 4; 
  65   1                      beep();   EA = 1;  
  66   1      }
  67          
  68          void IR_SHOW() { 
  69   1      //      P0 = table[IRCOM[5]];   
  70   1      //      GEWEI = 0; 
  71   1      //      SHIWEI = 1; 
  72   1      //      delay1(4); 
  73   1      //      P0 = table[IRCOM[6]]; 
  74   1      //      SHIWEI = 0; 
  75   1      //      GEWEI = 1;  
  76   1      //      delay1(4); 
  77   1              unsigned char i;
  78   1              for(i = 0; i < 8; i++){
  79   2                      P1= ~(1<<i);//??pos??????
  80   2                      P0 = table[IRCOM[3]];//P0???number????
  81   2              }
  82   1      }
  83          void beep(){ 
  84   1              unsigned char i; 
  85   1              for (i=0;i<100;i++)   {  
  86   2              delay(5); 
  87   2              BEEP=!BEEP;  
  88   2              }  
  89   1              BEEP=1;
  90   1      }
  91          void delay(unsigned char x)//x*0.14MS
  92          {
  93   1              unsigned char i;
  94   1              while(x--) { 
  95   2              for (i = 0; i<13; i++) ;
  96   2              }
  97   1      }
  98          void delay1(unsigned char ms){
  99   1              unsigned char i; 
 100   1              while(ms--) { 
 101   2                      for(i = 0; i<120; i++)  { 
 102   3                              _nop_(); 
 103   3                              _nop_();  
 104   3                              _nop_();  
 105   3                              _nop_();  
 106   3                      }
 107   2              }
 108   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.52.0.0   ________                                                          04/06/2015 18:13:44 PAGE 3   

   CODE SIZE        =    308    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
